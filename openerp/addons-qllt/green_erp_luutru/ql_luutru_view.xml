<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    

        					<!--Lưu trú-->   
        					
	    <record id="luu_tru_search" model="ir.ui.view">
            <field name="name">luu.tru.search</field>
            <field name="model">luu.tru</field>
            <field name="arch" type="xml">
                <search string="Quản lý lưu trú">
                	<field name="name" />
                    <field name="khach_tinhtp_id"/>
                    <field name="khach_quanhuyen_id"/>
                    <field name="khach_phuongxa_id"/>
                    <field name="quoc_tich_id"/>
                    <field name="khach_san_id"/>
                    <field name="so_giay_to"/>
                    <separator/>
                    <group expand="0" string="Group By...">
                    	<filter string="Tỉnh (thành phố)" domain="[]" context="{'group_by':'khach_tinhtp_id'}"/>
                        <filter string="Quận (huyện)" domain="[]" context="{'group_by':'khach_quanhuyen_id'}"/>
                        <filter string="Phường (xã)" domain="[]"  context="{'group_by':'khach_phuongxa_id'}"/>
                        <filter string="Khách sạn" domain="[]"  context="{'group_by':'khach_san_id'}"/>
                        <filter string="Quốc tịch" domain="[]"  context="{'group_by':'quoc_tich_id'}"/>
                    </group>
               </search>
            </field>
        </record>	
        
        <record id="luu_tru_today_search" model="ir.ui.view">
            <field name="name">luu.tru.search</field>
            <field name="model">luu.tru</field>
            <field name="arch" type="xml">
                <search string="Quản lý lưu trú">
                	<field name="name" />
                    <field name="khach_tinhtp_id"/>
                    <field name="khach_quanhuyen_id"/>
                    <field name="khach_phuongxa_id"/>
                    <field name="quoc_tich_id"/>
                    <field name="khach_san_id"/>
                    <field name="so_giay_to"/>
                    <filter icon="terp-go-today" string="Today" name="today" domain="[('ngay_den','&gt;=',current_date),('ngay_den','&lt;=',current_date)]"/>
                    <separator/>
                    <group expand="0" string="Group By...">
                    	<filter string="Tỉnh (thành phố)" domain="[]" context="{'group_by':'khach_tinhtp_id'}"/>
                        <filter string="Quận (huyện)" domain="[]" context="{'group_by':'khach_quanhuyen_id'}"/>
                        <filter string="Phường (xã)" domain="[]"  context="{'group_by':'khach_phuongxa_id'}"/>
                        <filter string="Khách sạn" domain="[]"  context="{'group_by':'khach_san_id'}"/>
                        <filter string="Quốc tịch" domain="[]"  context="{'group_by':'quoc_tich_id'}"/>
                    </group>
               </search>
            </field>
        </record>				
        					
        <record model="ir.ui.view" id="luu_tru_tree">
            <field name="name">luu.tru.tree</field>
            <field name="model">luu.tru</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Quản lý lưu trú" >
                	<field name="khach_san_id" />
                    <field name="name" />
                    <field name="gioi_tinh" />
                    <field name="ngay_sinh" />
                    <field name="quoc_tich_id" />
                    <field name="so_giay_to" />
                    <field name="dia_chi" />
                    <field name="khach_phuongxa_id" />
                    <field name="khach_quanhuyen_id" />
                    <field name="khach_tinhtp_id" />
                    <field name="ngay_den" />
                    <field name="ngay_di" />
                    <field name="phong_ks_id" />
                    <field name="tiep_nhan" />
                </tree>
            </field>
        </record>  
        
        <record model="ir.ui.view" id="luu_tru_nhanh_tree">
            <field name="name">luu.tru.tree</field>
            <field name="model">luu.tru</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Quản lý lưu trú" editable='top'>
                	<field name="tiep_nhan" />
                	<field name="khach_san_id" on_change="on_change_diachi(khach_san_id)" options="{'no_create':True}"/>
                	<field name="phuong_xa_id" />
                    <field name="quan_huyen_id" />
                    <field name="tinh_tp_id" />
                </tree>
            </field>
        </record> 
        
        <record model="ir.ui.view" id="luu_tru_form">
            <field name="name">luu.tru.form</field>
            <field name="model">luu.tru</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Quản lý lưu trú" version="7.0">
               <!--  	<header>
	            		<button name="bt_duyet" attrs="{'invisible': [('hien_an', '!=', True)]}" string="Duyệt" type="object" class="oe_highlight" />
	            		
	                    <field name="trang_thai_id" widget="statusbar"/>
	            	</header>  -->
	                <sheet>
	                	<group>
	                		<field name="tiep_nhan" />
	                	</group>
                		<group col="4"  string="Thông tin lưu trú">
		            		<field name="khach_san_id" on_change="on_change_diachi(khach_san_id)" options="{'no_create':True}"/>
		            		<field name="tinh_tp_id" options="{'no_create':True}"/>                   
							<field name="quan_huyen_id" options="{'no_create':True}" domain="[('tinh_tp_id','=',tinh_tp_id)]" />
							<field name="phuong_xa_id" options="{'no_create':True}" domain="[('quan_huyen_id','=',quan_huyen_id)]" />
		                    <field name="dien_thoai"/>
		                    <newline/>
		                    <field name="ngay_den"/>
		                    <field name="ngay_di"/>
		                    <field name="tang_ks_id" options="{'no_create':True}" domain="[('ks_id','=',khach_san_id)]"/>
		                    <field name="phong_ks_id" options="{'no_create':True}" domain="[('tang_ks_id','=',tang_ks_id)]"/>
                		</group>
                		<group col="4"  string="Thông tin người lưu trú">
							<field name="name"  />
							<field name="ngay_sinh"  />
							<field name="gioi_tinh"  />
							<field name="quoc_tich_id" options="{'no_create':True}"/>
							<field name="loai_giay_to_id" options="{'no_create':True}" />
							<field name="so_giay_to"  />
							<field name="khach_tinhtp_id" options="{'no_create':True}" />                   
							<field name="khach_quanhuyen_id" options="{'no_create':True}" domain="[('tinh_tp_id','=',khach_tinhtp_id)]" />
							<field name="khach_phuongxa_id" options="{'no_create':True}" domain="[('quan_huyen_id','=',khach_quanhuyen_id)]" />
							<field name="dia_chi"/>
                		</group>
	                </sheet>
                </form>
            </field>
        </record>
       
        <record model="ir.actions.act_window" id="action_luu_tru">
            <field name="name">Quản lý lưu trú</field>
            <field name="res_model">luu.tru</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="luu_tru_search"/>
            <field name="context">{'readonly_by_pass': True}</field>
        </record> 
        
        <record id="action_luu_tru1" model="ir.actions.act_window.view">
	        <field eval="1" name="sequence"/>
	        <field name="view_mode">tree</field>
	        <field name="view_id" ref="luu_tru_tree"/>
	        <field name="act_window_id" ref="action_luu_tru"/>
	    </record>
	        
	    <record id="action_luu_tru2" model="ir.actions.act_window.view">
	        <field eval="2" name="sequence"/>
	        <field name="view_mode">form</field>
	        <field name="view_id" ref="luu_tru_form"/>
	        <field name="act_window_id" ref="action_luu_tru"/>
	    </record>
	    
	    <record model="ir.actions.act_window" id="action_luu_tru_today">
            <field name="name">Khai báo lưu trú</field>
            <field name="res_model">luu.tru</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="luu_tru_today_search"/>
            <field name="context">{'readonly_by_pass': True,'search_default_today': True}</field>
        </record> 
        
        <record id="action_luu_tru_today1" model="ir.actions.act_window.view">
	        <field eval="3" name="sequence"/>
	        <field name="view_mode">tree</field>
	        <field name="view_id" ref="luu_tru_tree"/>
	        <field name="act_window_id" ref="action_luu_tru_today"/>
	    </record>
	        
	    <record id="action_luu_tru_today2" model="ir.actions.act_window.view">
	        <field eval="4" name="sequence"/>
	        <field name="view_mode">form</field>
	        <field name="view_id" ref="luu_tru_form"/>
	        <field name="act_window_id" ref="action_luu_tru_today"/>
	    </record>
	    
	    <record model="ir.actions.act_window" id="action_luu_tru_nhanh">
            <field name="name">Khai báo lưu trú nhanh</field>
            <field name="res_model">luu.tru</field>
            <field name="view_type">tree</field>
            <field name="view_mode">tree</field>
            <field name="search_view_id" ref="luu_tru_search"/>
            <field name="context">{'readonly_by_pass': True}</field>
        </record> 
        
        <record id="action_luu_tru_nhanh1" model="ir.actions.act_window.view">
	        <field eval="5" name="sequence"/>
	        <field name="view_mode">tree</field>
	        <field name="view_id" ref="luu_tru_nhanh_tree"/>
	        <field name="act_window_id" ref="action_luu_tru_nhanh"/>
	    </record>
	        
    </data>
</openerp>
